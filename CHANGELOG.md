# Лог изменений

Все заметные изменения в этом проекте будут отражаться в этом документе.

Формат лога изменений базируется на [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

## [Новое]

### Изменено

* Теперь не требуется указывать путь на уровне контракта в атрибуте `ApiAttribute`
* Метод `Call` клиента переименован в `Request`
* Разделён readme.md
* Асинхронным методам добавлен `Async` в имя

### Добавлено

* Поддержка запросов и детализаций ответов без содержательного ответа: `ApiRequest` и `CallDetails` - без `generic` параметра

## [3.5.15] - 2020-11-20

### Изменено:

* Добавление API-proxy с временем жизни `Singleton`, а не `Scoped`

## [3.5.14] - 2020-11-11

### Изменено

* При ошибке обработки ответа на запрос в методе `ApiRequest<TRes>.GetResult()` выбрасывается исключение `ResponseProcessingException`
* При ошибке обработки ответа на запрос в методе `ApiRequest<TRes>.GetDetails()` выбрасывается исключение `DetailedResponseProcessingException<TRes>`, содержащее все детали запроса и ответа, кроме самого десериализованного ответа
* Учитывается атрибут `$type` в `json` ответах при десериализации для воссоздания объекта конкретного типа 

### Исправлено

* У запросов с бинарным содержимым не был указан заголовок `ContentType`  

## [3.5.11] - 2020-11-05

### Добавлено

* Поддержка `CallDetails<>` как результатов выполнения методов контрактов API в прозрачном прокси 

## [3.4.11] - 2020-07-31

### Исправлено:

* Не указывался заголовок `Content-Length` запроса для `JSON`

## [3.4.10] - 2020-07-07

### Исправлено:

* Устранён баг привязки конфигурации к зарегистрированному клиенту

## [3.4.7] - 2020-06-03

### Добавлено:

* Контроль наличия секции конфигурации в методе интеграции с указанием имени секции;
* Поддержка типа ответа `application/octet-stream`.

## [3.4.6] - 2020-04-29

### Добавлено

* Игнорирование содержимого ответа, если статус-код ответа не `2хх`;
* Поддержка  шаблонных строк (`$"...{var1}..{var2}..."`) в выражениях вызова методов контрактов API.

## [3.4.5] - 2020-04-29

### Добавлено

* Проверка медиа-типа содержания ответа;
* Игнорирование содержимого ответа `application/problem+json`.

## [3.4.4] - 2020-04-29

### Исправлено

* Исправлена ошибка в случае, если не указан базовый путь контракта;
* Поддержка типов значений в качестве выходного параметра метода `API`: `short`, `ushort`, `long`, `ulong`, `float`, `decimal`. 

## [3.4.3] - 2020-04-28

### Добавлено

* Десериализация ответа типа `IEnumerable<>`

## [3.4.2] - 2020-04-27

### Добавлено 

- Провайдер `HttpClient` для тестов;
- Раздел "Тестирование" в [readme](./readme.md).

## [3.4.1] - 2020-04-26

### Добавлено 

- Поддержка конфигурирования подключений;
- Прокси для прозрачной автоматической реализации контрактов `API`;
- Регистрация контрактов `API` и инъекция их в `DI` контейнер.
- Требование к методам контрактов сервисов - они должны быть асинхронными, т.е. возвращать `Task` или `Task<>`.
- Changelog

### Изменено

- Переход на `.NET Core 3.1` для дальнейшего применения специфичных решений для этой платформы;

### Исправлено

- Возврат значений по умолчанию в случае, если ответ не имеет содержательной части: 
  - `null` для ссылочных типов;
  - `default()` - для типов значений.

